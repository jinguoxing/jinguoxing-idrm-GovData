# 候选生成功能分析

## 一、当前状态

### 1.1 独立的候选生成页面（BU-04）

**位置**：侧边栏 → 数据发现 → 候选生成 (BU-04)

**功能特点**：
- ✅ 完整的独立页面
- ✅ 显示多个候选对象列表（卡片视图）
- ✅ 支持运行AI分析生成新候选
- ✅ 支持查看候选详情（字段映射预览）
- ✅ 支持接受/拒绝候选
- ✅ 支持置信度过滤
- ✅ 支持名称冲突检测

**使用场景**：
- 批量查看所有AI生成的候选对象
- 运行AI分析发现新候选
- 管理候选对象列表

**问题**：
- ❌ 不在主流程中，用户可能不知道何时使用
- ❌ 与识别结果确认页面功能有重叠
- ❌ 增加了流程复杂度

---

### 1.2 识别结果确认页中的候选建议（辅助功能）

**位置**：识别结果确认 → 识别结果对比页

**功能特点**：
- ✅ 集成在识别结果确认页面中
- ✅ 针对单个识别结果提供候选建议
- ✅ 按需显示（点击"查看候选建议"按钮）
- ✅ 不阻塞主流程
- ✅ 提供备选名称建议
- ✅ 支持采纳建议生成业务对象

**使用场景**：
- 在确认识别结果时，需要查看AI的候选建议
- 对当前识别结果不满意，想看看其他建议
- 需要备选名称建议

**优点**：
- ✅ 上下文相关（在确认识别结果时使用）
- ✅ 不增加额外页面切换
- ✅ 作为辅助功能，按需使用

---

## 二、功能对比

| 功能点 | 独立候选生成页面 | 识别结果确认页候选建议 |
|--------|-----------------|---------------------|
| **位置** | 独立页面（BU-04） | 集成在识别结果对比页 |
| **触发方式** | 菜单导航 | 按钮点击（按需） |
| **数据范围** | 所有候选对象 | 单个识别结果的候选建议 |
| **AI分析** | 支持运行AI分析 | 支持运行AI分析 |
| **候选列表** | 多个候选对象 | 单个识别结果的候选建议 |
| **字段预览** | 完整的字段映射预览 | 简化的候选建议 |
| **接受/拒绝** | 支持 | 支持采纳/忽略 |
| **主流程** | 不在主流程中 | 在主流程中（辅助功能） |
| **使用频率** | 可能较低 | 按需使用 |

---

## 三、建议方案

### 方案A：保留独立页面，但标记为可选功能（推荐）

**理由**：
1. **不同使用场景**：
   - 独立页面适合批量查看和管理所有候选
   - 识别结果确认页的候选建议适合在确认时使用

2. **功能互补**：
   - 独立页面：全局视角，批量管理
   - 候选建议：局部视角，上下文相关

3. **向后兼容**：
   - 保留现有功能，不破坏已有工作流
   - 用户可以选择使用方式

**实施建议**：
- 在菜单中标记为"（可选）"或"（辅助）"
- 在页面标题中说明"可选功能，不在主流程中"
- 在识别结果确认页的候选建议中添加"查看所有候选"链接，跳转到独立页面

---

### 方案B：完全移除独立页面，只保留候选建议

**理由**：
1. **简化流程**：减少页面数量，降低复杂度
2. **符合优化目标**：候选生成不作为必经步骤
3. **功能已覆盖**：识别结果确认页的候选建议已满足主要需求

**实施建议**：
- 移除菜单项"候选生成 (BU-04)"
- 移除 `CandidateGenerationView` 组件
- 增强识别结果确认页的候选建议功能（如果需要）

**风险**：
- 可能失去批量查看候选的功能
- 用户可能不习惯

---

### 方案C：合并功能，增强识别结果确认页

**理由**：
1. **统一入口**：所有候选相关功能都在识别结果确认页
2. **减少页面切换**：提高效率
3. **上下文一致**：在确认识别结果时查看候选更合理

**实施建议**：
- 在识别结果确认页添加"候选管理"标签页
- 将独立页面的功能迁移过来
- 移除独立页面

**优点**：
- ✅ 功能集中
- ✅ 流程更连贯
- ✅ 减少页面数量

**缺点**：
- ⚠️ 识别结果确认页可能变得复杂
- ⚠️ 需要重构

---

## 四、推荐方案：方案A（保留但标记为可选）

### 4.1 实施步骤

1. **菜单标记**
   ```typescript
   { id: 'bu_candidates', label: '候选生成 (BU-04) (可选)', icon: Sparkles }
   ```

2. **页面说明**
   - 在候选生成页面顶部添加说明：
     "此功能为可选功能，不在主流程中。如需在确认识别结果时查看候选建议，请在识别结果确认页面使用。"

3. **添加跳转链接**
   - 在识别结果确认页的候选建议中添加：
     "查看所有候选对象" → 跳转到独立页面

4. **文档更新**
   - 在流程文档中说明候选生成为可选功能
   - 说明两种使用方式的区别

### 4.2 使用场景区分

**使用独立候选生成页面**：
- 需要批量查看所有候选对象
- 需要运行AI分析生成新候选
- 需要管理候选对象列表
- 需要查看完整的候选详情

**使用识别结果确认页的候选建议**：
- 在确认识别结果时，需要查看候选建议
- 对当前识别结果不满意，想看看其他建议
- 需要备选名称建议
- 需要快速采纳建议生成业务对象

---

## 五、总结

### 当前情况
- ✅ 识别结果确认页的候选建议已实现（辅助功能）
- ✅ 独立的候选生成页面仍然存在
- ⚠️ 两者功能有重叠，但使用场景不同

### 建议
**保留独立候选生成页面，但明确标记为可选功能**

**理由**：
1. 两种功能服务于不同场景
2. 独立页面提供批量管理能力
3. 候选建议提供上下文相关的辅助
4. 保留向后兼容性

**优化措施**：
1. 在菜单中标记为"（可选）"
2. 在页面中添加使用说明
3. 在两个功能之间添加跳转链接
4. 更新文档说明

---

**结论**：**建议保留候选生成功能，但明确标记为可选功能，不在主流程中。**

