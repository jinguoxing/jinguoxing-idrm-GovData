# 数据发现到业务对象流程优化方案

## 一、当前流程分析

### 1.1 现有流程路径

```
当前路径（4步）：
┌─────────────────────────────────────────┐
│ 1. 逻辑视图（语义理解 BU-03）            │
│    └─ AI 语义分析                         │
│    └─ 字段语义识别                        │
│         ↓                                │
│ 2. 识别结果确认（BU-05）                  │
│    └─ 验证识别结果                        │
│    └─ 确认表级对象建议                    │
│    └─ 确认字段语义分类                    │
│    └─ 解决冲突                           │
│         ↓                                │
│ 3. 候选生成（BU-04）                      │
│    └─ 基于确认结果生成候选                │
│    └─ 用户选择候选                        │
│         ↓                                │
│ 4. 业务对象建模（TD-03）                  │
│    └─ 创建业务对象                        │
│    └─ 定义业务属性                        │
└─────────────────────────────────────────┘

总计：4个页面，多次切换
```

### 1.2 问题分析

#### 问题1：路径过长
- ❌ 需要4个页面才能完成从数据发现到业务对象的转化
- ❌ 用户需要频繁切换页面
- ❌ 每个页面都要重新加载和理解上下文

#### 问题2：流程不够直观
- ❌ "识别结果确认"和"候选生成"的职责划分不够清晰
- ❌ 用户可能不清楚为什么要经过这两个步骤
- ❌ 流程的连贯性不够强

#### 问题3：效率问题
- ❌ 对于高置信度的识别结果，仍然需要走完所有步骤
- ❌ 批量处理能力不足
- ❌ 缺少快捷通道

#### 问题4：数据传递问题
- ❌ 每次切换页面都可能丢失上下文
- ❌ 需要重复确认相同的信息
- ❌ 状态管理复杂

---

## 二、优化方案

### 2.1 方案一：合并关键步骤（推荐）

#### 优化思路
将"识别结果确认"和"候选生成"合并，在识别结果确认页面直接支持生成业务对象。

#### 优化后的流程
```
优化路径（3步）：
┌─────────────────────────────────────────┐
│ 1. 逻辑视图（语义理解 BU-03）            │
│    └─ AI 语义分析                         │
│    └─ 字段语义识别                        │
│         ↓                                │
│ 2. 识别结果确认（BU-05）增强版            │
│    ├─ 验证识别结果                        │
│    ├─ 确认表级对象建议                    │
│    ├─ 确认字段语义分类                    │
│    ├─ 解决冲突                           │
│    └─ 【新增】直接生成业务对象 ⭐          │
│         ↓                                │
│ 3. 业务对象建模（TD-03）                  │
│    └─ 编辑和完善业务对象                  │
└─────────────────────────────────────────┘

总计：3个页面，减少1步
```

#### 关键改进
1. **在识别结果确认页面增加"生成业务对象"功能**
   - 在识别结果对比页：每个表可以"直接生成业务对象"
   - 在批量确认页：支持"批量生成业务对象"
   - 在冲突解释页：解决冲突后可以直接生成

2. **简化候选生成**
   - 将"候选生成"改为"智能建议"功能
   - 集成到识别结果确认页面中
   - 不作为独立页面，而是作为辅助功能

3. **一键生成**
   - 对于高置信度结果，支持"一键生成业务对象"
   - 自动填充业务对象信息
   - 用户只需要确认即可

---

### 2.2 方案二：快捷通道

#### 优化思路
保留原有流程，但增加快捷通道，让用户可以选择快速路径。

#### 快捷通道设计
```
标准路径（4步）：
逻辑视图 → 识别结果确认 → 候选生成 → 业务对象建模

快捷通道1（2步）：高置信度结果
逻辑视图 → 【一键生成】→ 业务对象建模
  └─ 对于置信度 > 0.9 的结果
  └─ 跳过识别结果确认和候选生成
  └─ 直接生成业务对象

快捷通道2（3步）：中等置信度结果
逻辑视图 → 识别结果确认 → 【直接生成】→ 业务对象建模
  └─ 对于置信度 0.7-0.9 的结果
  └─ 跳过候选生成
  └─ 在确认后直接生成

标准通道（4步）：低置信度或需要详细审核
逻辑视图 → 识别结果确认 → 候选生成 → 业务对象建模
  └─ 对于置信度 < 0.7 或需要人工审核的结果
  └─ 完整流程
```

#### 智能路由
- **高置信度（> 0.9）**：显示"一键生成"按钮，跳过中间步骤
- **中置信度（0.7-0.9）**：显示"快速生成"按钮，跳过候选生成
- **低置信度（< 0.7）**：走标准流程，需要详细确认

---

### 2.3 方案三：一体化工作台（最激进）

#### 优化思路
将语义理解、识别结果确认、业务对象生成整合到一个工作台中。

#### 一体化工作台设计
```
语义理解与业务对象生成工作台
│
├─ 左侧：表列表 + 语义理解状态
│   ├─ 未分析
│   ├─ 已分析（语义理解完成）
│   ├─ 已确认（识别结果确认）
│   └─ 已生成（业务对象已创建）
│
├─ 中间：主工作区
│   ├─ 标签1：语义理解
│   │   └─ AI 语义分析
│   │   └─ 字段语义识别
│   │
│   ├─ 标签2：识别结果确认
│   │   ├─ 表级确认
│   │   ├─ 字段确认
│   │   └─ 冲突解决
│   │
│   └─ 标签3：生成业务对象
│       ├─ 预览业务对象结构
│       ├─ 确认和调整
│       └─ 生成业务对象
│
└─ 右侧：辅助信息
    ├─ 相关表
    ├─ 历史记录
    └─ 快速操作
```

#### 优点
- ✅ 所有操作在一个页面完成
- ✅ 上下文保持完整
- ✅ 流程直观
- ✅ 减少页面切换

#### 缺点
- ❌ 页面复杂度较高
- ❌ 需要较大改动
- ❌ 可能信息过载

---

## 三、推荐方案（方案一 + 方案二的组合）

### 3.1 核心优化策略

**策略1：识别结果确认页面增强**
- 在识别结果确认页面增加"生成业务对象"功能
- 支持单个和批量生成
- 集成生成向导（之前设计的3步向导）

**策略2：智能快捷通道**
- 根据置信度提供不同的快捷通道
- 高置信度：一键生成
- 中置信度：快速生成
- 低置信度：标准流程

**策略3：简化候选生成**
- 将"候选生成"改为可选功能
- 不作为必经步骤
- 仅在需要时使用

### 3.2 优化后的流程

```
【主要路径】（3步，推荐）
逻辑视图（语义理解）
  ↓
识别结果确认（确认 + 生成）
  └─ 确认识别结果
  └─ 直接生成业务对象（新增功能）
  ↓
业务对象建模（编辑完善）

【快捷路径】（2步，高置信度）
逻辑视图（语义理解）
  ↓
【一键生成业务对象】（跳过确认）
  ↓
业务对象建模（编辑完善）

【完整路径】（4步，低置信度或复杂场景）
逻辑视图（语义理解）
  ↓
识别结果确认（详细确认）
  ↓
候选生成（可选，仅在需要时）
  ↓
业务对象建模（编辑完善）
```

---

## 四、具体实现建议

### 4.1 识别结果确认页面增强

#### 在识别结果对比页
```
每个表的结果卡片：
┌─────────────────────────────────────┐
│ 表名：order_info                    │
│ 对象建议：订单（置信度：92%）       │
│                                     │
│ [查看详情] [编辑] [接受] [拒绝]     │
│ [生成业务对象] ⭐ 新增               │
└─────────────────────────────────────┘
```

#### 在批量确认页
```
批量操作区：
┌─────────────────────────────────────┐
│ [批量接受] [批量拒绝]               │
│ [批量生成业务对象] ⭐ 新增            │
└─────────────────────────────────────┘
```

#### 在冲突解释页
```
冲突解决后：
┌─────────────────────────────────────┐
│ 冲突已解决 ✓                         │
│                                     │
│ [生成业务对象] ⭐ 新增                │
└─────────────────────────────────────┘
```

### 4.2 快捷通道实现

#### 在逻辑视图页面
```
AI 语义理解结果：
┌─────────────────────────────────────┐
│ 业务名称：订单                       │
│ 置信度：95% ⭐⭐⭐                    │
│                                     │
│ [生成业务对象向导] 主要按钮          │
│ [一键生成业务对象] 快捷按钮 ⭐        │
│                                     │
│ 提示：置信度较高，可直接生成          │
└─────────────────────────────────────┘
```

**条件判断**：
- 置信度 > 0.9：显示"一键生成"按钮（绿色，推荐）
- 置信度 0.7-0.9：显示"快速生成"按钮（蓝色）
- 置信度 < 0.7：只显示"生成业务对象向导"按钮

### 4.3 候选生成简化

#### 将候选生成改为辅助功能
- **不在主流程中**：不作为必经步骤
- **作为可选功能**：在识别结果确认页面提供"查看候选建议"功能
- **智能建议**：仅在用户需要时显示AI生成的候选建议
- **快速采纳**：可以直接采纳候选建议生成业务对象

---

## 五、用户体验对比

### 5.1 当前流程（4步）

**用户操作**：
1. 进入逻辑视图 → 完成语义理解
2. 切换到识别结果确认 → 确认结果
3. 切换到候选生成 → 选择候选
4. 切换到业务对象建模 → 创建对象

**问题**：
- ❌ 需要4次页面切换
- ❌ 流程耗时较长
- ❌ 上下文容易丢失

### 5.2 优化后流程（主要路径3步）

**用户操作**：
1. 进入逻辑视图 → 完成语义理解
2. 切换到识别结果确认 → 确认结果 → 直接生成业务对象
3. 切换到业务对象建模 → 编辑完善

**改进**：
- ✅ 减少1次页面切换
- ✅ 流程更连贯
- ✅ 操作更直接

### 5.3 优化后流程（快捷路径2步）

**用户操作**：
1. 进入逻辑视图 → 完成语义理解 → 一键生成
2. 切换到业务对象建模 → 编辑完善

**改进**：
- ✅ 只需2次页面切换
- ✅ 对于高置信度结果，几乎无需人工干预
- ✅ 大幅提升效率

---

## 六、实施建议

### 6.1 第一阶段：增强识别结果确认（推荐优先实施）

**目标**：在识别结果确认页面增加"生成业务对象"功能

**实施内容**：
1. 在识别结果对比页增加"生成业务对象"按钮
2. 在批量确认页增加"批量生成业务对象"功能
3. 集成之前设计的3步生成向导
4. 生成后自动跳转到业务对象建模页

**影响**：
- ✅ 立即可用
- ✅ 减少1步流程
- ✅ 保持向后兼容

### 6.2 第二阶段：增加快捷通道（可选）

**目标**：根据置信度提供快捷通道

**实施内容**：
1. 在逻辑视图页面增加"一键生成"按钮
2. 实现置信度判断逻辑
3. 实现快速生成流程
4. 提供用户选择（标准路径 vs 快捷路径）

**影响**：
- ✅ 进一步优化体验
- ✅ 提升高置信度结果的处理效率
- ⚠️ 需要增加复杂度

### 6.3 第三阶段：简化候选生成（长期优化）

**目标**：将候选生成改为辅助功能

**实施内容**：
1. 将候选生成功能集成到识别结果确认页面
2. 改为可选功能，不在主流程中
3. 作为智能建议功能提供

**影响**：
- ✅ 简化主流程
- ⚠️ 需要重构现有功能

---

## 七、总结

### 7.1 核心问题
当前流程确实**路径过长**（4步），影响了用户体验和效率。

### 7.2 推荐方案
**方案一：增强识别结果确认页面**（优先实施）
- 在识别结果确认页面增加"生成业务对象"功能
- 将流程从4步减少到3步
- 实施难度低，效果明显

**方案二：增加快捷通道**（可选）
- 根据置信度提供快捷通道
- 高置信度结果可2步完成
- 进一步提升效率

### 7.3 实施优先级

1. **高优先级**：在识别结果确认页面增加"生成业务对象"功能
2. **中优先级**：增加快捷通道（一键生成）
3. **低优先级**：简化候选生成（改为辅助功能）

### 7.4 预期效果

**当前**：4步，多次页面切换
**优化后（主要路径）**：3步，减少1次切换
**优化后（快捷路径）**：2步，大幅提升效率

**用户体验提升**：
- ✅ 流程更短
- ✅ 操作更直接
- ✅ 效率更高
- ✅ 选择更灵活

