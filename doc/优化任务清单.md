# 优化任务清单

## 📋 任务概览

根据 `数据发现到业务对象流程优化.md` 和 `语义理解到业务对象生成流程.md` 文档，以下是待实施的优化任务。

---

## 🎯 第一阶段：增强识别结果确认页面（高优先级）

### 任务1.1：在识别结果对比页增加"生成业务对象"功能
**状态**：❌ 未实施  
**位置**：`IdentificationComparisonTab` 组件  
**需求**：
- 在每个识别结果卡片上增加"生成业务对象"按钮
- 点击后打开3步生成向导
- 支持从识别结果直接生成业务对象

**参考文档**：`doc/数据发现到业务对象流程优化.md` 第4.1节

---

### 任务1.2：在批量确认页增加"批量生成业务对象"功能
**状态**：❌ 未实施  
**位置**：`BatchConfirmationTab` 组件  
**需求**：
- 在批量操作区增加"批量生成业务对象"按钮
- 支持批量生成多个业务对象
- 批量生成时支持统一设置生成选项

**参考文档**：`doc/数据发现到业务对象流程优化.md` 第4.1节

---

### 任务1.3：在冲突解释页增加生成功能
**状态**：❌ 未实施  
**位置**：`ConflictExplanationTab` 组件  
**需求**：
- 冲突解决后显示"生成业务对象"按钮
- 使用解决后的结果生成业务对象

**参考文档**：`doc/数据发现到业务对象流程优化.md` 第4.1节

---

### 任务1.4：实现完整的3步生成向导
**状态**：⚠️ 部分实施（逻辑视图有按钮，但向导未完整实现）  
**位置**：需要创建 `GenerateBusinessObjectWizard` 组件  
**需求**：

#### 步骤1：基本信息确认
- 业务对象名称（可编辑，从语义结果获取）
- 业务对象编码（自动生成，可编辑）
- 业务描述（自动填充，可编辑）
- 来源表（只读显示）

#### 步骤2：字段映射预览
- 显示物理字段 → 业务属性映射表
- 语义角色自动标注
- 字段类型自动转换
- 支持调整和删除字段
- 字段过滤规则（跳过时间戳字段等）

#### 步骤3：生成选项
- 是否立即发布
- 是否创建映射关系
- 是否发送通知
- 选择业务域（可选）

**参考文档**：`doc/语义理解到业务对象生成流程.md` 第3.1节

---

### 任务1.5：生成过程反馈
**状态**：❌ 未实施  
**需求**：
- 显示生成进度动画
- 步骤指示（创建业务对象、创建属性、建立映射、创建血缘、记录日志）
- 预计剩余时间

**参考文档**：`doc/语义理解到业务对象生成流程.md` 第3.2节

---

### 任务1.6：生成成功后的交互
**状态**：❌ 未实施  
**需求**：
- 显示生成结果摘要
- 自动跳转到业务对象建模页
- 自动定位到新创建的业务对象
- 高亮显示新对象（"新创建"徽章，3秒后消失）

**参考文档**：`doc/语义理解到业务对象生成流程.md` 第3.3-3.4节

---

## 🚀 第二阶段：增加快捷通道（中优先级）

### 任务2.1：在逻辑视图页面增加"一键生成"按钮
**状态**：❌ 未实施  
**位置**：`DataSemanticUnderstandingView` 组件（AI分析结果区域）  
**需求**：
- 根据置信度显示不同的按钮：
  - 置信度 > 0.9：显示"一键生成业务对象"按钮（绿色，推荐）
  - 置信度 0.7-0.9：显示"快速生成业务对象"按钮（蓝色）
  - 置信度 < 0.7：只显示"生成业务对象向导"按钮
- 一键生成跳过确认步骤，直接生成

**参考文档**：`doc/数据发现到业务对象流程优化.md` 第4.2节

---

### 任务2.2：实现置信度判断逻辑
**状态**：❌ 未实施  
**需求**：
- 基于 `semanticProfile.confidence` 判断置信度级别
- 根据置信度提供不同的快捷通道

**参考文档**：`doc/数据发现到业务对象流程优化.md` 第2.2节

---

## 📝 第三阶段：简化候选生成（低优先级）

### 任务3.1：将候选生成改为辅助功能
**状态**：❌ 未实施  
**位置**：`CandidateGenerationView` 或集成到 `IdentificationResultView`  
**需求**：
- 将"候选生成"从主流程中移除
- 在识别结果确认页面提供"查看候选建议"功能
- 作为可选功能，仅在用户需要时显示

**参考文档**：`doc/数据发现到业务对象流程优化.md` 第4.3节

---

## 🔧 技术实现要点

### 数据转换逻辑
- 从语义理解结果生成业务对象的数据结构
- 字段过滤规则（跳过时间戳字段等）
- 字段类型转换（物理类型 → 业务类型）
- 属性命名转换（物理字段名 → 业务属性名，驼峰命名）

**参考文档**：`doc/语义理解到业务对象生成流程.md` 第5.1节

### 组件结构
- `GenerateBusinessObjectWizard` 组件接口定义
- `GenerationConfig` 配置结构
- 状态管理（wizardStep, generationConfig, isGenerating等）

**参考文档**：`doc/语义理解到业务对象生成流程.md` 第5.2-5.3节

---

## 📊 当前实现状态

### ✅ 已完成
- 逻辑视图有"生成业务对象"按钮（但向导未完整实现）
- 识别结果确认页面基础功能已实现（识别结果对比、批量确认、冲突解释）

### ⚠️ 部分完成
- 生成向导的状态管理已定义（`showGenerationWizard`, `wizardTable`, `wizardSemantic`）
- 但向导组件本身未实现

### ❌ 未完成
- 完整的3步生成向导
- 识别结果确认页面的生成功能
- 快捷通道（一键生成）
- 生成后的交互优化

---

## 🎯 实施优先级建议

### 立即实施（第一阶段）
1. **任务1.4**：实现完整的3步生成向导（核心功能）
2. **任务1.1**：在识别结果对比页增加生成功能
3. **任务1.6**：生成成功后的交互优化

### 短期实施（第一阶段剩余）
4. **任务1.2**：批量生成功能
5. **任务1.3**：冲突解释页生成功能
6. **任务1.5**：生成过程反馈

### 中期实施（第二阶段）
7. **任务2.1**：一键生成按钮
8. **任务2.2**：置信度判断逻辑

### 长期优化（第三阶段）
9. **任务3.1**：简化候选生成

---

## 📝 注意事项

1. **数据一致性**：确保从不同入口（逻辑视图、识别结果确认）生成的业务对象数据格式一致
2. **状态管理**：生成过程中需要管理多个状态（向导步骤、配置、生成状态等）
3. **错误处理**：需要处理生成失败的情况，提供友好的错误提示
4. **性能优化**：批量生成时需要考虑性能，可能需要分批处理
5. **用户体验**：确保流程连贯，减少用户等待时间，提供清晰的反馈

